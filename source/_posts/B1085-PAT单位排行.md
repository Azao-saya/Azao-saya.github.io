---
title: B1085-PAT单位排行
date: 2019-12-2 4:34:12 
categories: PAT练习
tags: 
- 未AC题目
cover: https://cdn.jsdelivr.net/gh/Azao-saya/image-blog@master/20210102/id=54341472(なつ).mdg91a8wwtc.jpg
---

## 题目描述 <!--more-->

每次 PAT 考试结束后，考试中心都会发布一个考生单位排行榜。本题就请你实现这个功能。

## 输入描述

>  输入第一行给出一个正整数 N（≤105），即考生人数。随后 N 行，每行按下列格式给出一个考生的信息：
>
>  ```
>  准考证号 得分 学校
>  ```
>
>  其中`准考证号`是由 6 个字符组成的字符串，其首字母表示考试的级别：`B`代表乙级，`A`代表甲级，`T`代表顶级；`得分`是 [0, 100] 区间内的整数；`学校`是由不超过 6 个英文字母组成的单位码（大小写无关）。注意：题目保证每个考生的准考证号是不同的。

## 输出描述

>  首先在一行中输出单位个数。随后按以下格式非降序输出单位的排行榜：
>
>  ```
>  排名 学校 加权总分 考生人数
>  ```
>
>  其中`排名`是该单位的排名（从 1 开始）；`学校`是全部按小写字母输出的单位码；`加权总分`定义为`乙级总分/1.5 + 甲级总分 + 顶级总分*1.5`的**整数部分**；`考生人数`是该属于单位的考生的总人数。
>
>  学校首先按加权总分排行。如有并列，则应对应相同的排名，并按考生人数升序输出。如果仍然并列，则按单位码的字典序输出。

## 示例

### 输入

> 10
> A57908 85 Au
> B57908 54 LanX
> A37487 60 au
> T28374 67 CMU
> T32486 24 hypu
> A66734 92 cmu
> B76378 71 AU
> A47780 45 lanx
> A72809 100 pku
> A03274 45 hypu

### 输出

> 5
> 1 cmu 192 2
> 1 au 192 3
> 3 pku 100 1
> 4 hypu 81 2
> 4 lanx 81 2

## 解题思路：

- 只对了两个测试点，wowpH对了4个后两个超时，熊仙森对了3个后面两个测试点没有超时。
- https://blog.csdn.net/qunqunstyle99/article/details/84887522
- 都有可以学习的地方，不过别人代码挺难读的，如果真的还有空的话在优化吧。
- 看了一眼好像是因为把各级别级的成绩全部想加之后再做乘系数，我是直接乘了。不过都是用double接受的这真的会让数不一样么。

---

---



```
public class PAT_B1085 {
    public static void main(String[] args) throws IOException { //只对了两个测试点，_2对了4个，
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        int n = Integer.parseInt(br.readLine());
        Map<String,Double> map = new HashMap<String, Double>();
        Map<String,Integer> map2 = new HashMap<String,Integer>();
        for (int i = 0; i <n ; i++) {
            String[] temp = br.readLine().split(" ");
            char ch = temp[0].charAt(0);
            Double score = Double.parseDouble(temp[1]);
            String schoolName = temp[2].toLowerCase();
            if (ch == 'T') {
                score = score*1.5;
            }else if (ch == 'B'){
                score = score*2/3;
            }
            if (map.containsKey(schoolName)){
                Double sum = map.get(schoolName);
                int pres = map2.get(schoolName);
                map.put(schoolName,sum+score);
                map2.put(schoolName,pres+1);
            }else {
                map.put(schoolName,score);
                map2.put(schoolName,1);
            }
        }
        br.close();
        ArrayList<School> list = new ArrayList<>();
        Set<String> set = map.keySet();
        for (String in : set) {
            list.add(new School(in,map.get(in),map2.get(in)));
        }
        Collections.sort(list,new SchoolCompare());
        int rank = 1;
        System.out.println(list.size());
        for (int i = 0; i <list.size() ; i++) {
            if (i!=0 && list.get(i-1).sum == list.get(i).sum ){
                System.out.printf("%s %s %s %s",rank,list.get(i).name,list.get(i).sum,list.get(i).pres);
                System.out.println();
            }else {
                rank = i+1;
                System.out.printf("%s %s %s %s",rank,list.get(i).name,list.get(i).sum,list.get(i).pres);
                System.out.println();
            }
        }
    }
}
class School {
    String name;
    int sum;
    int pres;
    public School(String name, double sum, int pres){
        this.name = name;
        this.sum = (int)sum;
        this.pres = pres;
    }
}

class SchoolCompare implements Comparator<School> {
    public int compare(School o1,School o2){
        int x = o2.sum-o1.sum;
        int y = o2.pres-o1.pres;
        if (x==0){
            if (y ==0){
                return -o1.name.compareTo(o2.name);
            }else {
                return -y;
            }
        }
        return x;
    }
}
```



```
/*******************************************************************************
 Submit Time			Status	Score	Problem	Compiler		Run Time	User
 8/29/2019, 21:14:17	PA		20		1085	Java (openjdk)	79 ms		wowpH
 Case 4, 5: TLE
 *******************************************************************************/
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.Arrays;
import java.util.HashMap;
import java.util.Map;

public class PAT_B1085_2 {
    public static void main(String[] args)	throws NumberFormatException,
            IOException {
        // 1、The input stream.
        InputStreamReader in = new InputStreamReader(System.in);
        BufferedReader input = new BufferedReader(in);

        // 2、Input the number of student.
        String str = input.readLine();
        int studentNumber = Integer.parseInt(str);// The number of student.

        // 3、Key is the unit code and value is the school subscript.
        Map<String, Integer> map = new HashMap<String, Integer>();

        School[] school = new School[studentNumber];
        int schoolNumber = 0;// The number of school.

        // 4、Enter information of studentNumber students.
        for (int i = 0; i < studentNumber; ++i) {
            str = input.readLine();
            String[] arr = str.split(" ");

            // 5、The test level, test score and unit code.
            char level = arr[0].charAt(0);
            int score = Integer.parseInt(arr[1]);
            String unitCode = arr[2].toLowerCase();

            // 6、Save the information.
            if (map.containsKey(unitCode)) {// Schools already exist.
                int index = map.get(unitCode);
                school[index].addScore(score, level);
                school[index].addOneStudent();// Student population plus 1
            } else {
                school[schoolNumber] = new School();
                school[schoolNumber].setUnitCode(unitCode);
                school[schoolNumber].addScore(score, level);
                school[schoolNumber].addOneStudent();

                // 7、Add the unit code and subscript to the map.
                map.put(unitCode, schoolNumber);
                ++schoolNumber;
            }
        }

        // 8、Calculate the total score.
        for (int i = 0; i < schoolNumber; ++i) {
            double topScore = school[i].getTopScore() * 1.5;
            double bScore = school[i].getbScore() * 2.0 / 3;
            double totalScore = topScore + school[i].getaScore() + bScore;
            school[i].setTotalScore((int) totalScore);
        }

        // 9、Get the rank list.
        Arrays.sort(school, 0, schoolNumber);

        // 10、Output the rank list.
        int rank = 1, preScore = -1;
        System.out.println(schoolNumber);
        for (int i = 0; i < schoolNumber; ++i) {
            if (preScore != school[i].getTotalScore()) {
                rank = i + 1;
                preScore = school[i].getTotalScore();
            }
            System.out.print(rank + " ");
            System.out.print(school[i].getUnitCode() + " ");
            System.out.print(school[i].getTotalScore() + " ");
            System.out.println(school[i].getStudentNumber());
        }
    }
}

class School implements Comparable<School> {
    private String unitCode;// The unit code.
    private int topScore = 0;// The top score.
    private int aScore = 0;// Class a total score.
    private int bScore = 0;// Class b total score.
    private int totalScore = 0;// The weighted total score.
    private int studentNumber = 0;// The number of students.

    public String getUnitCode() {
        return unitCode;
    }

    public void setUnitCode(String unitCode) {
        this.unitCode = unitCode;
    }

    public int getTopScore() {
        return topScore;
    }

    public int getaScore() {
        return aScore;
    }

    public int getbScore() {
        return bScore;
    }

    public int getTotalScore() {
        return totalScore;
    }

    public void setTotalScore(int totalScore) {
        this.totalScore = totalScore;
    }

    public int getStudentNumber() {
        return studentNumber;
    }

    public void addOneStudent() {
        ++this.studentNumber;
    }

    public void addScore(	int score,
                             char level) {
        switch (level) {
            case 'T':
                topScore += score;
                break;
            case 'A':
                aScore += score;
                break;
            case 'B':
                bScore += score;
                break;
            default:
        }
    }

    @Override
    public int compareTo(School school) {
        // Descending order of total scores.
        if (totalScore != school.getTotalScore()) {
            return school.getTotalScore() - totalScore;
        }
        // Student Numbers in ascending order.
        if (studentNumber != school.getStudentNumber()) {
            return studentNumber - school.getStudentNumber();
        }
        // Ascending sorting of unit code.
        return unitCode.compareTo(school.getUnitCode());
    }
}
```

