---
title: 1031 查验身份证
date: 2019-11-1 5:34:12 
categories: PAT练习
tags:
- ASCII
- 字符串操作
- 偷学柳神的帅气代码
cover: https://cdn.jsdelivr.net/gh/Azao-saya/image-blog@master/20210102/id=66095083.46m18zruic60.png
---

## 题目描述 <!--more-->

- 一个合法的身份证号码由17位地区、日期编号和顺序编号加1位校验码组成。校验码的计算规则如下：

  首先对前17位数字加权求和，权重分配为：{7，9，10，5，8，4，2，1，6，3，7，9，10，5，8，4，2}；然后将计算的和对11取模得到值`Z`；最后按照以下关系对应`Z`值与校验码`M`的值：

  >  Z: 0 1 2 3 4 5 6 7 8 9 10
  > M :1 0 X 9 8 7 6 5 4 3 2

  现在给定一些身份证号码，请你验证校验码的有效性，并输出有问题的号码。

## 输入描述

>     输入第一行给出正整数*N*（≤100）是输入的身份证号码的个数。随后*N*行，每行给出1个18位身份证号码。 

## 输出描述:

>    按照输入的顺序每行输出1个有问题的身份证号码。这里并不检验前17位是否合理，只检查前17位是否全为数字且最后1位校验码计算准确。如果所有号码都正常，则输出`All passed`。 

## 示例

### 输入样例1：

> 4
> 320124198808240056
> 12010X198901011234
> 110108196711301866
> 37070419881216001X

### 输出样例1：

> 12010X198901011234
> 110108196711301866
> 37070419881216001X

### 输入样例2：

> 2
> 320124198808240056
> 110108196711301862

### 输出样例2：

> All passed

## 解题思路：

-  对权重这个词的概念是占了百分之几，没转过弯题目想了很久
-  读懂了就挺简单一道题，前17位每位数字乘以权重想加。
-  对这个总和取模11，所以得到的数只会是0到10.
-  0到10的Z每个数对应了M的一个值，如果第17位校验码等于这个M值
-  那么号码就是正常的。

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

public class PAT_B1031 {
    public static void main(String[] args) throws IOException {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        int n = Integer.parseInt(br.readLine());
        boolean flag = true;
        for (int i = 0; i <n ; i++) {
            String temp = br.readLine();
            if (!check(temp)){
                flag = false;
                System.out.println(temp);
            }
        }
        if(flag){
            System.out.println("All passed");
        }
    }

    public static boolean check(String temp){
        int[] weight = {7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2}; //权重的意思为每个数字要乘以多少，在求和里占多少的比例。
        int sum = 0;
        for (int i = 0; i <temp.length()-1 ; i++) {
            sum += weight[i]*(temp.charAt(i)-'0'); //减'0'转换为int值，因为有X的存在不能直接使用Integer.parseInt
        }
        char nowM = temp.charAt(17);
        char[] m = {
                '1', '0', 'X', '9', '8', '7', '6', '5', '4', '3', '2'   //得到的z意为m数组的索引，z =3 意为m[3]等于'9'
        };
        if (nowM == m[sum % 11]){
            return true;
        }
        return false;
    }
}
```

