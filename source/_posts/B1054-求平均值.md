---
title: B1054-求平均值 
date: 2019-11-3 4:34:12 
categories: PAT练习
tags:
- try/catch
- 正则表达式
cover: https://cdn.jsdelivr.net/gh/Azao-saya/image-blog@master/20210102/id=57171771(BoCuden).50wbrbiulzc0.jpg
---

## 题目描述 <!--more-->

本题的基本要求非常简单：给定 N 个实数，计算它们的平均值。但复杂的是有些输入数据可能是非法的。一个“合法”的输入是 [−1000,1000] 区间内的实数，并且最多精确到小数点后 2 位。当你计算平均值的时候，不能把那些非法的数据算在内。

## 输入描述

>输入第一行给出正整数 N（≤100）。随后一行给出 N 个实数，数字间以一个空格分隔。

## 输出描述:

>对每个非法输入，在一行中输出 `ERROR: X is not a legal number`，其中 `X` 是输入。最后在一行中输出结果：`The average of K numbers is Y`，其中 `K` 是合法输入的个数，`Y` 是它们的平均值，精确到小数点后 2 位。如果平均值无法计算，则用 `Undefined` 替换 `Y`。如果 `K` 为 1，则输出 `The average of 1 number is Y`。 

## 示例

### 输入1

>7
>5 -3.2 aaa 9999 2.3.4 7.123 2.35

### 输出1

> ERROR: aaa is not a legal number
> ERROR: 9999 is not a legal number
> ERROR: 2.3.4 is not a legal number
> ERROR: 7.123 is not a legal number
> The average of 3 numbers is 1.38

### 输入2

>2
>aaa -9999

### 输出2

> ERROR: aaa is not a legal number
> ERROR: -9999 is not a legal number
> The average of 0 numbers is Undefined

 

## 解题思路：

-  这里用trycatch处理异常来解决，读入的非数字
-  如题意所示7.123也是一个非法输入，指小数超过两位的都是非法输入
-  这里用String.format把数字转换成只保留两位小数的，在与原始数字进行比较。
-  若差值超过0.001意为该数小数部分超过2位，同样抛出异常

---

---



```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

public class PAT_B1054 {
    public static void main(String[] args) throws IOException {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        int n = Integer.parseInt(br.readLine());
        String[] str = br.readLine().split(" ");
        int count = 0;
        double total = 0.0;
        for (int i = 0; i <n ; i++) {
            try{
                double num = Double.parseDouble(str[i]);
                double compare = Double.parseDouble(String.format("%.02f",num));
                if (num<-1000 || num>1000 || Math.abs(num-compare)>0.001){
                    throw new NumberFormatException();
                }
                count++;
                total += num;
            }catch (NumberFormatException e){
                System.out.println("ERROR: "+ str[i]+" is not a legal number");
            }
        }

        if (count == 0){
            System.out.println("The average of 0 numbers is Undefined");
        }else if(count ==1){
            System.out.printf("The average of 1 number is %.2f",total); //number少了一个s
        }else {
            System.out.printf("The average of %d numbers is %.2f",count,total/count);
        }
    }
}
```

